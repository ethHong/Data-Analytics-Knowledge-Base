
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../test_SQL/">
      
      
        <link rel="next" href="../test_stat_basics/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4">
    
    
      
        <title>ðŸ“„ Regression_Evaluation - MSBA Knowledge Base</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#linear-regression-model-what-is-the-correct-way-to-use-them" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MSBA Knowledge Base" class="md-header__button md-logo" aria-label="MSBA Knowledge Base" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MSBA Knowledge Base
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ðŸ“„ Regression_Evaluation
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MSBA Knowledge Base" class="md-nav__button md-logo" aria-label="MSBA Knowledge Base" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    MSBA Knowledge Base
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Documents
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Documents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Parameter_Estimataion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ðŸ“„ Parameter_Estimataion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test_upload_omited_variables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ðŸ“„ test_upload_omited_variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test_SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ðŸ“„ test_SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    ðŸ“„ Regression_Evaluation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ðŸ“„ Regression_Evaluation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simple-linear-regression-its-all-about-conditional-prediction" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Linear regression - It's All About Conditional Prediction
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test_stat_basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ðŸ“„ test_stat_basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test_Redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ðŸ“„ test_Redis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test_MongoDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ðŸ“„ test_MongoDB
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simple-linear-regression-its-all-about-conditional-prediction" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Linear regression - It's All About Conditional Prediction
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<p><strong>reference_docs: "Parameter_Estimation, test_stat_basics"</strong></p>
<p>This time, I will cover 'Linear Regression Model'. I know there are bunch of great resources on Linear Regression itself, so I will focus more on some of significant implications on Linear Regression, and some of the thoratical backgrounds behind methods we might have used without deeper understanding. Some of the questions answered would be:</p>
<ul>
<li>What does Linear Regression imply in terms of conditional prediction? (Why does it work better than mean estimation?)</li>
<li>What are differences between just showing high correlation, and doing linear regression?</li>
<li>What impacts accuracy of linear regression prediction? (Or, standard error?)</li>
<li>Why do we do the log-scale? - Is it just because numbers are so large?</li>
</ul>
<hr />
<p>Last time, we have identified:</p>
<ol>
<li>'Modeling' impies finding out any kind of functions, that can describe and predict 'real world patterns'</li>
<li>Since it is impossible to get precise value of 'true patterns', we are using 'estimator' (e.g. Sample mean as an mean estimator, to estimate mean of population data.)</li>
<li>'Standard Error' tell us about confidence interval of the 'true pattern' - e.g. even if we somehow identified 'true mean' of any elephants, if standard deviation is too large, mean would not help predicting future values 'with confidence'. </li>
<li>So, <strong><em>knowing standard deviation is important</em></strong>, but since we can't not figure out 'population standard deviation (std of true patterns)' we utilize sample standard deviation : <strong><em>'Standard Error'</em></strong>. Smaller standard error implies, narrower confidence interval - which means we can use estimator to predict future value with 'more confidence'.</li>
</ol>
<p>This time, let's look at one of the most widely used and important model - linear regression.</p>
<hr />
<h1 id="linear-regression-model-what-is-the-correct-way-to-use-them">Linear regression model - What is the 'correct' way to use them?</h1>
<p>I think linear regression is one of the modeling method which is widely used, and many people will be used to it's concepts, formulation, or how to implement them in Python or R codes. <strong><em>However, it is more  important to implement them with better understanding.</em></strong> For any kind of data, that 'seems to have linear correlation' if we put them into the linear regression model, it gives some prediction. <strong>However, to what extent could we trust this outcome?</strong> What are the factors that impact accuracy of prediction based on linear regression?</p>
<hr />
<p>From one of the previous post on <a href="https://ethhong.github.io/statistics/datascience/2024/08/10/Reviewing-MLE-(Maximum-Liklihood-Estimator).html">MLE (maximum likelihood estimator)</a>, we had looked into linear regression in terms of Bayesian approach.</p>
<p><strong>Recap:</strong> We can interpret 'Likelihood' as: given the observation or data, how likely is the data coming from certain model? For instand, when we toss the coin 10 times and see head 2 times, it is more likely to think probability of getting head is lower than 50%. Here, if we say <span class="arithmatex">\(\theta\)</span> is probability of getting head, <span class="arithmatex">\(L(\theta) = \theta^x(1-\theta)^{n-x}\)</span> where <span class="arithmatex">\(x = 2\)</span>. Likelihood will be maximized then <span class="arithmatex">\(\theta\)</span> is around 0.2. </p>
<p>Like we see from the ilustration below, it is more likley to infer that the data below, are generated from 'true line' model A, rather than model B. The MLE approach tried to get a model which maximizes likelihood - and we found out that it is same as linear regression model with regularization. </p>
<p><img width="734" alt="image" src="https://github.com/user-attachments/assets/51f86905-d4a5-4451-abc7-5bc3becbb080"></p>
<p>This time, let's try to understand linear regresssion itself.</p>
<h2 id="simple-linear-regression-its-all-about-conditional-prediction">Simple Linear regression - It's All About Conditional Prediction</h2>
<p><img width="500" alt="Screenshot 2024-11-23 at 4 39 24â€¯PM" src="https://github.com/user-attachments/assets/21271fe0-3649-415d-89cd-412f1b0abcb6"></p>
<p>I love using easy examples, so let's keep using example of elephants. I think many of people are used to illustrations like above. Linear regression is modeling pattern between two (or more) variables. However, it is also important to understand that it is 'expanding prediction of <span class="arithmatex">\(Y\)</span> into conditional prediction given <span class="arithmatex">\(X\)</span>.'<img width="500" alt="Screenshot 2024-11-23 at 4 45 47â€¯PM" src="https://github.com/user-attachments/assets/72a9bd13-83e9-465a-9955-e93e18c95391"></p>
<p>Let's remove the X axis, projecting data toward Y axisd. Now we only have sample statistic data of 'weight', so the best predictor for weight of 'all elephants in the world' would be a sample mean - this is exactly same as the mean estimation we'd done form the previous post. However, when additional information 'Age' is given (<span class="arithmatex">\(X\)</span>), we can intuitively see that our model coule be more precise. Why? because based on their age elephants tend to have different weight, but mean prediction does not reflect this information. If we split up group of elephants by range of their age group, we can see that their 'group mean' moves. </p>
<p><img width="500" alt="Screenshot 2024-11-23 at 4 53 46â€¯PM" src="https://github.com/user-attachments/assets/871ebf80-b206-4b8d-95fc-3cf26c20966b"></p>
<p><strong>So, what is the conclusion here?</strong> </p>
<ul>
<li>Linear regression is a <strong><em>conditional perdiction</em></strong>, predicting value of Y given that <span class="arithmatex">\(X=x\)</span>, where <span class="arithmatex">\(x\)</span> is the value of data point.</li>
<li>Also, we can recognize that 'linear regression' (or conditional prediction) is better than simple mean prediction when Y moves as X moves - which means, <strong>X and Y are somehow 'correlated'.</strong></li>
</ul>
<h1 id="quick-review-on-correlation-and-covariance">Quick Review on Correlation and Covariance</h1>
<p>Let's co back to statistic class for a momne. 'Covariance' measures how random variables X and Y moves together (increases, or decreases together.)
$$
Cov(X, Y) = \frac{\sum_i^{n}(X_i - \bar{X})(Y_i - \bar{Y})}{n}
$$
Have you thought of implication behind this formulation? Covariance is <strong>high</strong> when, for each of data points, value of x is far from the mean, value of your is also far from the mean. If deviation from mean is large for one variable, but small for the other variable, covariance will be canceled out. </p>
<p>Look at the illustrations below. Two cases have same mean of X and Y, but only for the first case two variables are correlated. We could see that for the first case, as X deviates from the mean, Y also deviates from the mean. However, for the second case, for many data points Y value does not deviate from mean while X deviates from the mean.</p>
<p><img width="500" alt="Screenshot 2024-11-23 at 4 53 46â€¯PM" src="https://github.com/user-attachments/assets/b22c49b3-22ec-4b77-b9a3-f39cffd8fd56">
$$
Corr(X, Y) = \frac{Cov(X, Y)}{\sigma_X \sigma_Y}
$$
For sample correlation:
$$
Corr(X, Y)<em>{sample} = \frac{S</em>{XY}}{s_X s_Y}
$$</p>
<p>Correlation is basically computed by dividing Covariance, with each random variable's standard deviation. By doing this, we are standardizing covariance between the value of -1 and 1. Correlation seems to be representing linear relationship between random variables in some sense, but there is one problem: Correlation is <strong><em>unitless</em></strong>, so we cannot use them for prediction of future value. For instance, if age and weight of elephants show <strong>high correlation of 0.8</strong>. What does this number 0.8 imply? It only shows 'how correlation is strong' as a relative metric, but does not tell us anything about 'how to predict weight, given age'. <strong><em>However, the correlation itself is related to the linear regression coefficient.</em></strong></p>
<h1 id="linear-regression-and-correlation">Linear regression and correlation</h1>
<p><span class="arithmatex">\(Y = b_0 + b_1X\)</span></p>
<hr />
<p>Now, let's look at the linear regression model in detail. We are fitting a line on dataset by representing Y as linear function of X. <span class="arithmatex">\(b_0\)</span> and <span class="arithmatex">\(b_1\)</span> are two parameters that decides how to draw the line. Based on given data, what we are doing here is same as what we have done from the mean estimation: </p>
<ol>
<li>Assuming there are linear 'true line' that generated the data</li>
<li>Taking given data as sample, we are 'estimating' the 'true line' equation. </li>
<li>If our estimated line seems to be appropriately accurate (which means, it shows small standard error), we can use this estimated line to predict unseen future value.</li>
</ol>
<p>Values we are estimating will be <span class="arithmatex">\(b_0\)</span>, and <span class="arithmatex">\(b_1\)</span>. From our given dataset, the best estimator should have least square error, as we also mentioned from <a href="https://ethhong.github.io/statistics/datascience/2024/08/10/Reviewing-MLE-(Maximum-Liklihood-Estimator).html">this post</a>. I will skip how does Least Square Error solution is derived, but Least Square Solution is known as:
$$
b_1 = \frac{\sum_i^{N}(X_i - \bar{X})(Y_i - \bar{Y})}{\sum_i^{N}(X_i-\bar{X})^2} = \frac{s_{XY}}{s_X^2}
$$
$$
b_0 = \bar{Y} - b_1\bar{X}
$$</p>
<p>Doen't this look familiar? This is sample correlation multiplied by <span class="arithmatex">\(s_Y\)</span> over <span class="arithmatex">\(s_X\)</span>
$$
Corr(X, Y)_{sample} \frac{s_Y}{s_X}
$$
This implies that:</p>
<ul>
<li>The regression coefficient (slope) is, <strong><em>adjusting (scaling) correlation into the unit of Y</em></strong>: divided by STD of X and multiplied by STD of Y. </li>
<li>In linear regression, <span class="arithmatex">\(b_1 = 0\)</span> means two variables are not related, so we cannot predict Y with X. If correlation between X and Y is 0, this will make <span class="arithmatex">\(b1\)</span> also 0. <strong><em>This explains intuition that, linear regression model will only be valid if variables are correlated.</em></strong></li>
</ul>
<h2 id="two-more-insights-on-residual-e-epsilon-and-lease-square-error-solution">Two more insights on residual <span class="arithmatex">\(e\)</span>, <span class="arithmatex">\(\epsilon\)</span>, and Lease Square Error solution.</h2>
<h3 id="least-square-solution">Least Square Solution</h3>
<p>Least Square Solution is knows as: 
$$
b_1 = \frac{\sum_i^{N}(X_i - \bar{X})(Y_i - \bar{Y})}{\sum_i^{N}(X_i-\bar{X})^2} = \frac{s_{XY}}{s_X^2}
$$</p>
<p>And, <span class="arithmatex">\(b_0 = \bar{Y} - b_1\bar{X}\)</span></p>
<p>There are some more implication behind this. If we look at <span class="arithmatex">\(b_0\)</span> formula, and plug it into <span class="arithmatex">\(Y  = b_0 + b_1X\)</span>, we can find out that this Least Square Solution must pass <span class="arithmatex">\((\bar{X}, \bar{Y})\)</span>.</p>
<p><img width="500" alt="Screenshot 2024-11-23 at 4 39 24â€¯PM" src="https://github.com/user-attachments/assets/ea23aba3-dc9e-4d62-8117-9c3eb987e619"></p>
<h3 id="more-abot-residual-and-error">More abot residual, and error</h3>
<p>Now, let's dive deep into <span class="arithmatex">\(\epsilon\)</span> and <span class="arithmatex">\(e\)</span>. </p>
<p><img width="500" alt="Screenshot 2024-11-26 at 5 44 47â€¯PM" src="https://github.com/user-attachments/assets/e28b0b1e-e2c7-4d98-b840-1fa363c86404"></p>
<p>From the illustration above, let's say that the 'Blue line' is the 'ideal true linear line' which describes linear relatioship between age and weight of all elephants in the worlds. We are trying to 'predict' the line, from the given data. <strong>Here is a thing we need to keep in mind:</strong><em> </em>'<strong>True line' itslef also has 'irreducible error', and we define this as <span class="arithmatex">\(\epsilon\)</span>.</strong>* </p>
<p>Even we assume that the 'true line' is ideal line, it has error - unless all data points are exactly located on the true line. We call this 'irreducible error', because even we predict the true line precisely (which won't be possible, unless we have infinite data point) we cannot reduce this error. This is why we formulate 'true line as'</p>
<p><span class="arithmatex">\(Y = \beta_0 + \beta_1X + \epsilon\)</span>, and our prediction as <span class="arithmatex">\(\hat{Y} = \beta_0 + \beta_1X + e\)</span>. Here are two important insights for residual for 'least square estimator':</p>
<ol>
<li><strong>Mean of residual should be 0.</strong> </li>
<li><strong>Correlation between <span class="arithmatex">\(e\)</span> and <span class="arithmatex">\(X\)</span> should be 0. (<span class="arithmatex">\(Corr(e, X) = 0\)</span>)</strong></li>
<li><strong>Correlation between <span class="arithmatex">\(\hat{Y}\)</span> and <span class="arithmatex">\(e\)</span> should be zero. (Since <span class="arithmatex">\(\hat{Y}\)</span> is dependent on <span class="arithmatex">\(X\)</span>, if 2 is true, this is also true. )</strong></li>
</ol>
<p>The first one seems to be more intuitive: If the regression model has 'least square error', sum of it's errors will be canceled out to be zero. How about the second one? <strong>It implies 'Error should be consistent over entire range of X'.</strong> </p>
<h3 id="decomposition-of-error-term-sse-ssr-tss-and-r-square">Decomposition of error term - SSE, SSR, TSS, and R Square</h3>
<p>From the last post, we discussed that 'Variability' is important in measuring predictability (or accuracy) of the model (estimation). This is why we focus on variance, or standard error. <strong>So, let's look at how could 'Variability of Y' be decomposed.</strong></p>
<p>We know that:</p>
<ul>
<li><span class="arithmatex">\(\sum_{i=1}^Ne_i = 0\)</span></li>
<li><span class="arithmatex">\(corr(e, X) = 0\)</span></li>
<li><span class="arithmatex">\(corr(\hat{Y}, e) = 0\)</span></li>
</ul>
<p>Therefore, we can write 
$$
Var(Y) = Var(\hat{Y} + e) =  Var(\hat{Y}) + Var(e) + 2Cov(\hat{Y}, e) = Var(\hat{Y}) + Var(e)
$$
Here, 'variability of Y' is decompsed with variability of <span class="arithmatex">\(\hat{Y}\)</span> and variability of <span class="arithmatex">\(e\)</span>. We discussed that 'error term' is related to 'irriducible error'. Therefore only the <span class="arithmatex">\(Var(\hat{Y})\)</span> is the variability related to the regression model we build - which, we can explain with our regression model. So, <strong><em>we may wish variability related to our regression will be higher that the irreducible error</em></strong> - cause that means our model explain huge part of the variances in <span class="arithmatex">\(Y\)</span>, and our model fits better.</p>
<p>This is what 'R squre all about'</p>
<h3 id="why-r-square-is-not-accuracy-measure-but-measure-of-fit">Why R Square is not 'accuracy measure', but measure of 'fit'?</h3>
<p>It is easy to be too obsessed with R Square, and misinterpret it as 'accuracy measure'. However, if we search the definition, R Square is defined as a <strong>coefficient of determination</strong>. This is the definition from <a href="https://en.wikipedia.org/wiki/Coefficient_of_determination">Wikipedia</a>: <strong><em>R Square is the proportion of the variation in the dependent variable that is predictable from the independent variable(s)</em></strong></p>
<p>We had seen that <span class="arithmatex">\(Var(Y) = Var(\hat{Y}) + Var(e)\)</span>. Since sample variance of a random variable is <span class="arithmatex">\(\frac{1}{n-1} \sum (x_i - \bar{x})\)</span>, we can rewrite the formulation as:
$$
\sum_{i=1}^N(Y_i - \bar{Y})^2 = \sum_{i=1}^N(\hat{Y_i} - \bar{Y})^2 + \sum_{i=1}^Ne_i^2
$$
These are the definition of TSS, SSR, SSE
$$
TSS = SSR + SSE
$$</p>
<hr />
<div class="arithmatex">\[
R^2 = \frac{SSR}{SST} = 1 - \frac{SSE}{SST}
\]</div>
<p>Now, do you see the intention, and motivation behind R Square? </p>
<ul>
<li>R Square <strong>does not answer the question</strong> how is the model accurate?</li>
<li>It <strong>answers</strong>: <strong><em>'How much of variability is explained by the model?'</em></strong></li>
</ul>
<p>This is about 'goodness of fit', not about accuracy of prediction.</p>
<h3 id="then-how-do-we-evaluate-accuracy-always-standard-error">Then, how do we evaluate accuracy? - Always Standard Error.</h3>
<p>So, how do we evaluate the model in terms of the accuracy of prediction? We had done very similar thing for the mean estimation from the previous post - Standard Error. Only the different thing is that, this time we have 3 parametors:</p>
<ul>
<li><span class="arithmatex">\(\sigma_e\)</span>: Standard error of regression. We need to estimate, how large is the 'standard deviation' of residuals are. </li>
<li><span class="arithmatex">\(\beta_0\)</span> and <span class="arithmatex">\(\beta1\)</span>: We need to evaluate how is our estimated parameters distributed, and estimate their standard deviation through standard error of estimation. </li>
</ul>
<p>This is why I covered the concept of standard error in detail, <a href="https://ethhong.github.io/statistics/datascience/2024/11/01/DS-ML-Back-to-the-Basics-Series-1-Parameter-Estimation-and-Simple-Linear-Regression.html">with simple example of mean estimation from the previous post.</a> Whatever we are estimating, what matters is 'standard deviation' - higher the standard deviation, it means that the 'range (interval)' that unseen future data could likely be located will be wider. For 95% confidence interval, 95% of data are located in estimated point <span class="arithmatex">\(\pm 2\sigma\)</span>, so larger sigma will cause wider interval. <img width="500" alt="Screenshot 2024-11-26 at 6 11 55â€¯PM" src="https://github.com/user-attachments/assets/0c3d955a-5b0c-4560-a48b-22c8a96c7c2a"></p>
<p>I won't go deep into the calculation details, but each of the standard errors could be induced as the following</p>
<ul>
<li>
<p><strong><span class="arithmatex">\(\sigma_e\)</span>:</strong> We use sample standard deviation instead:
  $$
  \hat{\sigma_\epsilon}^2 = s^2 = \frac{1}{N-2}\sum_{i=1}^{N}e_i^2 = \frac{SSE}{N-2}
  $$</p>
</li>
<li>
<p><strong><span class="arithmatex">\(\sigma_{\beta_1}\)</span></strong> We use sample standard deviation here too: 
  $$
  \hat{\sigma_{\beta_1{}}} = \sqrt{\frac{\sigma_{\epsilon}^2}{(N-1)s_x^2}} \approx \sqrt{Var(b_1)} = s_{b_1} = \sqrt{\frac{s^2}{(N-1)s_x^2}}
  $$</p>
</li>
</ul>
<p>Don't worry about the computation, when we do the regression analysis with Python, or R, it will compute and give all the numbers. However, the thing we need to know is <strong><em>'Standard Error indicates how each of the estimated parameters are credible'</em></strong></p>
<ul>
<li>Lower SE for slope <span class="arithmatex">\(b_1\)</span> implies that, 'regression coefficient' for two variables are credible.</li>
<li>Lower SE of regression means, if we make prediction based on the linear model, it is highly likely that actual value will be close enough to our predicted value!</li>
</ul>
<h1 id="one-more-thing-what-matters-for-low-se-and-why-does-log-scale-works">One More thing - What matters for low SE, and why does log-scale works?</h1>
<p>For the standard error <span class="arithmatex">\(\hat{\sigma_\epsilon}^2\)</span>, there is similar imlication we saw from mean estimation problem: <strong><em>As we have larger sample size, the standard error will diminish.</em></strong> How about standard error of the slope coefficient?
$$
\sqrt{\frac{s_e^2}{(N-1)s_x^2}}
$$</p>
<ul>
<li>Numerator: Smaller sample standard deviation of <strong>'errors'</strong> will make standard error of the slope <strong>smaller</strong>. (This is not a standard deviation of the sample data, but standard deviation of sample 'error' - <span class="arithmatex">\(\hat{\sigma_\epsilon}^2\)</span>)</li>
</ul>
<p>This is one of the reasons why log-scaling work. Since log-scaling compress the scale of data, it helps reducing variability, when the value is too spread out. Log-scaling mitigates skewness and transforms data to fit linear assumptions better.</p>
<ul>
<li>Denominator:</li>
<li><strong>Larger sample</strong> will make standard error of the slope <strong>smaller</strong>.</li>
<li>Larger standard deviation of <span class="arithmatex">\(x\)</span> will make standard error of the slope <strong>smaller</strong>.</li>
</ul>
<p>All of the above seems intuitive, except for one thing - the last one. <strong><em>Isn't it better to have 'smaller' variance of the data?</em></strong> </p>
<p>However, larger variance in <span class="arithmatex">\(x\)</span> implies having more 'various' data. <strong>If X covers more wider range of values, we have more information.</strong> </p>
<h2 id="wait-then-how-is-the-accuracy-of-prediction-with-this-model-like">Wait, then how is the accuracy of 'prediction' with this model like?</h2>
<p>Now we know how to evaluate our model, and what kind of factors impact these accuracies. However, the standard errors we had looked at are about 'errors' within the model - how far are data in general variating from the fitted line? How far is our predicted line, from the actual 'true line?'</p>
<p>Then, how do we measure the accuracy of 'point estimation', if we are estimating unseen future Y value given some X value? </p>
<h3 id="sampling-errors">Sampling Errors</h3>
<p>When making prediction, we need to consider <strong>Sampling Error.</strong> This is because, our model only took 'sample' of data, not entire population (which is impossible) - so our estimator of <span class="arithmatex">\(\beta_0, \beta_1\)</span> use sample values, and we need to make adjustment for this. <strong>We can decompose Prediction Error into 'sampling error' and irreducible error (from variaboility of Y, which is irrelevant to X. )</strong>:
$$
e_f = \epsilon_f - Error_{sampling} = Y_f - b_0 - b_1X_f
$$
which could be decomposed as:
$$
 = \epsilon_f + (\beta_0 - \beta_1X_f) - (b_0 - b_1X_f)
$$
So, here the sampling error could be represented as:
$$
((b_0 - \beta_0) + (b_1 - \beta_1)X_f)
$$
which is error between 'estimated model and true line' parameters. Let's leave computation to the computer. The standard error of point estimation, <span class="arithmatex">\(Var(\hat{Y})\)</span> is computed as the following:
$$
S_{\text{pred}} = s \sqrt{1 + \frac{1}{N} + \frac{(X_f - \bar{X})^2}{(N-1)s_X^2}}
$$
Here, <span class="arithmatex">\(s\)</span> is standard error of regression, which is <span class="arithmatex">\(\hat{\sigma_{\epsilon}}^2 = s^2 = \frac{1}{N-2} \sum_{i=1}^N e_i^2 = \frac{\text{SSE}}{N-2}\)</span></p>
<p>So, how is the standard error decomposed?</p>
<ul>
<li><span class="arithmatex">\(s * 1\)</span> which is variation of epsilon) is SE of regression, <strong><em>which is unrelated to X</em></strong></li>
<li><span class="arithmatex">\(\frac{1}{N} + \frac{(X_f - \bar{X})^2}{(N-1)s_X^2}\)</span> <strong><em>is the part which is related to X</em></strong></li>
</ul>
<p>Here are 3 implications, which are similar to all other standard errors we had looked into. </p>
<ol>
<li>Larger N matters</li>
<li>Larger <span class="arithmatex">\(S_x\)</span> matters (More variability of sample data X)</li>
<li><strong><em>As <span class="arithmatex">\(X_f\)</span> is far from <span class="arithmatex">\(\bar{X}\)</span> â†’ larger S_pred</em></strong></li>
</ol>
<p>Only the last one is the new intuition. Drawing an illustration of the plot actually helps more intuitively understanding why:</p>
<p><img width="664" alt="Screenshot 2024-12-16 at 6 16 12â€¯PM" src="https://github.com/user-attachments/assets/895d1913-7363-429c-89c0-37ea481e978a" /></p>
<p>Look at the green line, <strong>X1</strong> and <strong>X2</strong>, X2 is far from mean of X, and we can see how point estimation in X2 is more far from true value, compared to X1! (Remember,  Least Square Error estimator should pass through mean of X, and Y.)</p>
<hr />
<p>Now we have covered what decides 'More Accurate' estimation. </p>
<p>Based on these baselines, I will try to deal with Logistic Regression, and Multi-variate Regressions later.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
    
  </body>
</html>